<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body onload="getJson(1)">
<form action="Second.html">
	<select onchange="getJson(this.value)" style="position: fixed">
	
		<option value="1"> Product A</option>
			<option value="2">Product B</option>
				<option value="3">Product C</option>
					<option value="4">Product D</option>
						
	</select><br>
<textarea rows="50" cols="100" id="JsnDta" style="height: 60vh;width: 80%;">
</textarea>
<input type="button" value="Create Image" onclick="Fn(this);">
</form>

</body>

<script type="text/javascript">
function Fn(a) {
	
	var jsn=document.getElementById('JsnDta').value
     var myObj=JSON.parse(jsn);
	var cond=true;
	console.log(myObj);
	msg="";
	for(var i=0;i<myObj.grt.length;i++){
		
		if((myObj.grt[i].title).length>20){
			cond=false;
			msg+="Length >20 in  Greeting Title at line "+ i+" ";
		}if((myObj.grt[i].message).length>140){
			cond=false;
			msg+="Length >120 in  Greeting Message at line "+ i+"";
		}
		if((myObj.grt[i].signature).length>30){
			cond=false;
			msg+="Length >30 in  Greeting Signature at line "+i+"";
		}
	}
	if(!cond){
		alert(msg);	
	}
	else{
	localStorage.setItem("JsnDta", jsn);
	
	 a.form.submit(); }
	
}
function getJson(a){
	
	var dta="";
	
	var p_typ=["","A","B","C","D"];
	alert(p_typ[a]);
	dtainr="";
	var size=['35','63','99','399','1599'];
   for(var i=0;i<size[a-1];i++){
	 dtainr+="{\"id\":\"  "+i+" \",\"title\":\"THE FOX IS A RED FOX\", \"message\" :\"Unfortunately, we don't have enough data  to generate an accurate Estimate Unfortunately, we don't have enough data to generate an accurate\" ,\"profile_image_url\":\"(Img/"+imgret(i+1)+""+parseInt(i+1)+".jpg)\",\"signature\":\"Robinson Appleson Smith Maccan\"},";  
   }
var dta="{\"center_image\":\"(383168.jpg)\",\"grt\":["+dtainr+"  {\"id\" :\" "+(parseInt(size[a-1])+1)+" \" ,  \"title\":\"THE FOX IS A RED FOX\", \"message\" :\"Unfortunately, we don't have enough data  to generate an accurate Estimate Unfortunately, we don't have enough data to generate an accurate\" ,\"profile_image_url\":\"(Img/"+imgret(parseInt(size[a-1])+1)+""+(parseInt((size[a-1]))+1)+".jpg)\",\"signature\":\"Robinson Appleson Smith Maccan\"}   ], \"product\":\""+p_typ[a]+"\"} ";
var jsn=document.getElementById('JsnDta').value=dta;
if(a==4){
	document.forms[0].action="D.html";
}else{
	
	document.forms[0].action="Second.html";
}
}

function imgret(a)
{
	var ret="0";
 var pric=parseInt(a);
 if(pric<10){
	 ret="00";
	 
 }else if(pric<100){
	 
	 ret="0";
 }else {
	 
	 ret="";
 }
return 	ret;
	}
</script>
</html>
